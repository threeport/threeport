// generated by 'threeport-codegen api-model' - do not edit

package v0

import (
	"encoding/json"
	"fmt"
	notifications "github.com/threeport/threeport/pkg/notifications"
)

const (
	ObjectTypeWorkloadDefinition         ObjectType = "WorkloadDefinition"
	ObjectTypeWorkloadResourceDefinition ObjectType = "WorkloadResourceDefinition"
	ObjectTypeWorkloadInstance           ObjectType = "WorkloadInstance"
	ObjectTypeWorkloadResourceInstance   ObjectType = "WorkloadResourceInstance"

	WorkloadStreamName = "workloadStream"

	WorkloadDefinitionSubject       = "workloadDefinition.*"
	WorkloadDefinitionCreateSubject = "workloadDefinition.create"
	WorkloadDefinitionUpdateSubject = "workloadDefinition.update"
	WorkloadDefinitionDeleteSubject = "workloadDefinition.delete"

	WorkloadResourceDefinitionSubject       = "workloadResourceDefinition.*"
	WorkloadResourceDefinitionCreateSubject = "workloadResourceDefinition.create"
	WorkloadResourceDefinitionUpdateSubject = "workloadResourceDefinition.update"
	WorkloadResourceDefinitionDeleteSubject = "workloadResourceDefinition.delete"

	WorkloadInstanceSubject       = "workloadInstance.*"
	WorkloadInstanceCreateSubject = "workloadInstance.create"
	WorkloadInstanceUpdateSubject = "workloadInstance.update"
	WorkloadInstanceDeleteSubject = "workloadInstance.delete"

	WorkloadResourceInstanceSubject       = "workloadResourceInstance.*"
	WorkloadResourceInstanceCreateSubject = "workloadResourceInstance.create"
	WorkloadResourceInstanceUpdateSubject = "workloadResourceInstance.update"
	WorkloadResourceInstanceDeleteSubject = "workloadResourceInstance.delete"

	PathWorkloadDefinitions         = "/v0/workload-definitions"
	PathWorkloadResourceDefinitions = "/v0/workload-resource-definitions"
	PathWorkloadInstances           = "/v0/workload-instances"
	PathWorkloadResourceInstances   = "/v0/workload-resource-instances"
)

// GetWorkloadDefinitionSubjects returns the NATS subjects
// for workload definitions.
func GetWorkloadDefinitionSubjects() []string {
	return []string{
		WorkloadDefinitionCreateSubject,
		WorkloadDefinitionUpdateSubject,
		WorkloadDefinitionDeleteSubject,
	}
}

// GetWorkloadResourceDefinitionSubjects returns the NATS subjects
// for workload resource definitions.
func GetWorkloadResourceDefinitionSubjects() []string {
	return []string{
		WorkloadResourceDefinitionCreateSubject,
		WorkloadResourceDefinitionUpdateSubject,
		WorkloadResourceDefinitionDeleteSubject,
	}
}

// GetWorkloadInstanceSubjects returns the NATS subjects
// for workload instances.
func GetWorkloadInstanceSubjects() []string {
	return []string{
		WorkloadInstanceCreateSubject,
		WorkloadInstanceUpdateSubject,
		WorkloadInstanceDeleteSubject,
	}
}

// GetWorkloadResourceInstanceSubjects returns the NATS subjects
// for workload resource instances.
func GetWorkloadResourceInstanceSubjects() []string {
	return []string{
		WorkloadResourceInstanceCreateSubject,
		WorkloadResourceInstanceUpdateSubject,
		WorkloadResourceInstanceDeleteSubject,
	}
}

// GetWorkloadSubjects returns the NATS subjects
// for all workload objects.
func GetWorkloadSubjects() []string {
	var workloadSubjects []string

	workloadSubjects = append(workloadSubjects, GetWorkloadDefinitionSubjects()...)
	workloadSubjects = append(workloadSubjects, GetWorkloadResourceDefinitionSubjects()...)
	workloadSubjects = append(workloadSubjects, GetWorkloadInstanceSubjects()...)
	workloadSubjects = append(workloadSubjects, GetWorkloadResourceInstanceSubjects()...)

	return workloadSubjects
}

// NotificationPayload returns the notification payload that is delivered to the
// controller when a change is made.  It includes the object as presented by the
// client when the change was made.
func (wd *WorkloadDefinition) NotificationPayload(
	operation notifications.NotificationOperation,
	requeue bool,
	lastDelay int64,
) (*[]byte, error) {
	notif := notifications.Notification{
		LastRequeueDelay: &lastDelay,
		Object:           wd,
		Operation:        operation,
		Requeue:          requeue,
	}

	payload, err := json.Marshal(notif)
	if err != nil {
		return &payload, fmt.Errorf("failed to marshal notification payload %+v: %w", wd, err)
	}

	return &payload, nil
}

// GetID returns the unique ID for the object.
func (wd *WorkloadDefinition) GetID() uint {
	return *wd.ID
}

// String returns a string representation of the ojbect.
func (wd WorkloadDefinition) String() string {
	return fmt.Sprintf("v0.WorkloadDefinition")
}

// NotificationPayload returns the notification payload that is delivered to the
// controller when a change is made.  It includes the object as presented by the
// client when the change was made.
func (wrd *WorkloadResourceDefinition) NotificationPayload(
	operation notifications.NotificationOperation,
	requeue bool,
	lastDelay int64,
) (*[]byte, error) {
	notif := notifications.Notification{
		LastRequeueDelay: &lastDelay,
		Object:           wrd,
		Operation:        operation,
		Requeue:          requeue,
	}

	payload, err := json.Marshal(notif)
	if err != nil {
		return &payload, fmt.Errorf("failed to marshal notification payload %+v: %w", wrd, err)
	}

	return &payload, nil
}

// GetID returns the unique ID for the object.
func (wrd *WorkloadResourceDefinition) GetID() uint {
	return *wrd.ID
}

// String returns a string representation of the ojbect.
func (wrd WorkloadResourceDefinition) String() string {
	return fmt.Sprintf("v0.WorkloadResourceDefinition")
}

// NotificationPayload returns the notification payload that is delivered to the
// controller when a change is made.  It includes the object as presented by the
// client when the change was made.
func (wi *WorkloadInstance) NotificationPayload(
	operation notifications.NotificationOperation,
	requeue bool,
	lastDelay int64,
) (*[]byte, error) {
	notif := notifications.Notification{
		LastRequeueDelay: &lastDelay,
		Object:           wi,
		Operation:        operation,
		Requeue:          requeue,
	}

	payload, err := json.Marshal(notif)
	if err != nil {
		return &payload, fmt.Errorf("failed to marshal notification payload %+v: %w", wi, err)
	}

	return &payload, nil
}

// GetID returns the unique ID for the object.
func (wi *WorkloadInstance) GetID() uint {
	return *wi.ID
}

// String returns a string representation of the ojbect.
func (wi WorkloadInstance) String() string {
	return fmt.Sprintf("v0.WorkloadInstance")
}

// NotificationPayload returns the notification payload that is delivered to the
// controller when a change is made.  It includes the object as presented by the
// client when the change was made.
func (wri *WorkloadResourceInstance) NotificationPayload(
	operation notifications.NotificationOperation,
	requeue bool,
	lastDelay int64,
) (*[]byte, error) {
	notif := notifications.Notification{
		LastRequeueDelay: &lastDelay,
		Object:           wri,
		Operation:        operation,
		Requeue:          requeue,
	}

	payload, err := json.Marshal(notif)
	if err != nil {
		return &payload, fmt.Errorf("failed to marshal notification payload %+v: %w", wri, err)
	}

	return &payload, nil
}

// GetID returns the unique ID for the object.
func (wri *WorkloadResourceInstance) GetID() uint {
	return *wri.ID
}

// String returns a string representation of the ojbect.
func (wri WorkloadResourceInstance) String() string {
	return fmt.Sprintf("v0.WorkloadResourceInstance")
}
